<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>
      {{content.global_[lang]['platformTitle']}} -
      {{content.tabs[lang]['articles']}}
    </title>
    <link
      rel="stylesheet"
      type="text/css"
      href="{{url_for('static', filename='website/articles/styles/computer.css')}}"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="{{url_for('static', filename='website/articles/styles/largeTablets.css')}}"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="{{url_for('static', filename='website/articles/styles/smallTablets.css')}}"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="{{url_for('static', filename='website/articles/styles/mobile.css')}}"
    />

    <link
      rel="stylesheet"
      type="text/css"
      href="{{url_for('static', filename='website/global/styles/computer.css')}}"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="{{url_for('static', filename='website/global/styles/largeTablets.css')}}"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="{{url_for('static', filename='website/global/styles/smallTablets.css')}}"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="{{url_for('static', filename='website/global/styles/mobile.css')}}"
    />

    <script
      type="text/javascript"
      src="{{url_for('static', filename='website/global/scripts/main.js')}}"
    ></script>
    <script
      type="text/javascript"
      src="{{url_for('static', filename='website/articles/scripts/main.js')}}"
    ></script>
  </head>
  <body>
    <style type="text/css">
      :root {
        --pff: "Raleway";
        --sff: "Poppins";
      }
    </style>
    <header>
      <div
        onclick="window.open('{{consts.index_route}}', `_self`);"
        id="logo"
      ></div>
      <div id="tabs">
        <a href="{{consts.index_route}}" class="header-tab"
          >{{content.tabs[lang]['home']}}</a
        >
        <a href="{{consts.articles_route}}" class="header-tab active"
          >{{content.tabs[lang]['articles']}}</a
        >
        <a href="{{consts.categories_route}}" class="header-tab"
          >{{content.tabs[lang]['categories']}}</a
        >
        
        <a href="{{consts.tools_route}}" class="header-tab"
          >{{content.tabs[lang]['tools']}}</a
        >
      </div>
      <div id="options">
        <button onclick="openSearcDFhDialog();" class="main-icon-button">
          <i onclick="openSearchDialog();" class="search"></i>
        </button>
        <button onclick="window.open('/login/', '_self');" class="main-button">
          {{content.actions[lang]['login']}}
        </button>
        |
        <button onclick="toggleTheme(`{{mode}}`);" class="main-icon-button">
          <i class="theme"></i>
        </button>
      </div>
    </header>
    <section id="entry">
      <div id="overlay">
        <h1>{{content.global_[lang]['whatsYouWantToRead']}}</h1>
        <p>{{content.global_[lang]['whatsYouWantToReadMsg']}}</p>
      </div>
    </section>
    <section id="articles">
      <div id="header">
        <h2>{{content.global_[lang]['ourArticles']}}</h2>
        <div id="fragments-controllers">
          <button onclick="selectFragment(this, 'trending-fragment');" class="shadow-button active">{{content.global_[lang]['trending']}}</button>
          <button onclick="selectFragment(this, 'recent-fragment');" class="shadow-button">{{content.global_[lang]['mostRecent']}}</button>
          <button onclick="selectFragment(this, 'random-fragment');" class="shadow-button">{{content.global_[lang]['random']}}</button>
          <button onclick="selectFragment(this, 'all-fragment');" class="shadow-button">{{content.global_[lang]['allArticles']}}</button>
        </div>
      </div>
      <div id="body">
        <div id="fragments">
          <div class="articles-fragment active" id="trending-fragment">
            {% for article in db_helper.articles.get_all_articles() %}
              <div class="search-dialog-article-card-border">
              <div class="search-dialog-article-card">
                <div
                  class="cover"
                  style="background-image: url(/assets/articles/covers/{{article.id}});"
                ></div>
                <div class="content">
                  <div class="classification">
                    <h4>
                      {{db_helper.categories.get_parent_category_by_id(article.parent_category).name[lang]}}
                    </h4>
                    <h4>
                      {{db_helper.categories.get_category_by_id(article.category).name[lang]}}
                    </h4>
                  </div>
                  <h3>{{article.title[lang]}}</h3>
                  <p>{{article.short_brief[lang]}}</p>
                </div>
              </div>
            </div>
            {%endfor%}
          </div>
          <div class="articles-fragment" id="recent-fragment">
            {% for article in db_helper.articles.get_all_articles() %}
              <div class="search-dialog-article-card-border">
              <div class="search-dialog-article-card">
                <div
                  class="cover"
                  style="background-image: url(/assets/articles/covers/{{article.id}});"
                ></div>
                <div class="content">
                  <div class="classification">
                    <h4>
                      {{db_helper.categories.get_parent_category_by_id(article.parent_category).name[lang]}}
                    </h4>
                    <h4>
                      {{db_helper.categories.get_category_by_id(article.category).name[lang]}}
                    </h4>
                  </div>
                  <h3>{{article.title[lang]}}</h3>
                  <p>{{article.short_brief[lang]}}</p>
                </div>
              </div>
            </div>
            {%endfor%}
          </div>
          <div class="articles-fragment" id="random-fragment">
            {% for article in db_helper.articles.get_all_articles() %}
              <div class="search-dialog-article-card-border">
              <div class="search-dialog-article-card">
                <div
                  class="cover"
                  style="background-image: url(/assets/articles/covers/{{article.id}});"
                ></div>
                <div class="content">
                  <div class="classification">
                    <h4>
                      {{db_helper.categories.get_parent_category_by_id(article.parent_category).name[lang]}}
                    </h4>
                    <h4>
                      {{db_helper.categories.get_category_by_id(article.category).name[lang]}}
                    </h4>
                  </div>
                  <h3>{{article.title[lang]}}</h3>
                  <p>{{article.short_brief[lang]}}</p>
                </div>
              </div>
            </div>
            {%endfor%}
          </div>
          <div class="articles-fragment" id="all-fragment">
            {% for article in db_helper.articles.get_all_articles() %}
              <div class="search-dialog-article-card-border">
              <div class="search-dialog-article-card">
                <div
                  class="cover"
                  style="background-image: url(/assets/articles/covers/{{article.id}});"
                ></div>
                <div class="content">
                  <div class="classification">
                    <h4>
                      {{db_helper.categories.get_parent_category_by_id(article.parent_category).name[lang]}}
                    </h4>
                    <h4>
                      {{db_helper.categories.get_category_by_id(article.category).name[lang]}}
                    </h4>
                  </div>
                  <h3>{{article.title[lang]}}</h3>
                  <p>{{article.short_brief[lang]}}</p>
                </div>
              </div>
            </div>
            {%endfor%}
          </div>
        </div>
        <div id="side-bar">
          <div id="filter-form">
            <h3>{{content.global_[lang]['filter']}}</h3>
            <p>{{content.global_[lang]['filterMsg']}}</p>
            <label for="name">{{content.global_[lang]['articleTitle']}}</label>
            <input class="single-line-field-awhite" type="name" name="name" placeholder="{{content.placeholders[lang]['search']}}">
            <label for="classification">{{content.global_[lang]['classification']}}</label>
            <div name="classification" id="classification">
              <button onclick="toggleClassificationDropdown()" id="classification-dropbtn" class="classification-dropbtn">{{content.global_[lang]["classification"]}}</button>
              <div id="classification-dropdown" class="classification-dropdown-content">
                <input type="text" placeholder="{{content.global_[lang]['search']}}..." id="classification-search" onkeyup="classificationfilter()">
                {% for pcat in db_helper.categories.parent_cats %}
                  <button style="font-family: 'Poppins';" onclick="chooseParentCategory({{pcat.to_dict(without_cats= True) | safe}}, '{{lang}}');">{{pcat.name[lang]}}</button>
                {% endfor %}
              </div>              
            </div>
            <div name="category" id="category">
              <label for="category">{{content.global_[lang]['category']}}</label>
              <div id="checkboxes"></div>
            </div>
            <div id="options">
              <button class="shadow-button" onclick="clearFilter();">{{content.actions[lang]['clear']}}</button>
              <button class="main-button">{{content.global_[lang]['search']}}</button>
            </div>
            <p id="filter-msg"></p>
          </div>
        </div>
      </div>
    </section>
    <footer>
      <div class="footer-row" id="categories">
        {% for pcat in db_helper.categories.parent_cats %}
        <div class="categories-column">
          <label><strong>{{pcat.name[lang]}}</strong></label>
          <p>{{pcat.bio[lang][:50]}}...</p>
          <div class="categories-column-tabs">
            {% for cat in pcat.categories %}
            <a href="/categories/{{cat.id}}/">{{cat.name[lang]}}</a>
            {% endfor %}
          </div>
        </div>
        {% endfor %}
      </div>
      <div class="footer-row" id="info">
        <div id="information">
          <div id="logo" class="symbol"></div>
          <h3 onclick="window.open('/', '_self');" style="cursor: pointer">{{content.global_[lang]['platformTitle']}}</h3>
          <p>{{content.global_[lang]['footerMsg']}}</p>
        </div>
        <div id="findUs">
          <h3>{{content.global_[lang]['lightToFindUs']}}</h3>
          <div id="social-media-icons">
            {% if cfg.facebook != '' %}
            <a
              href="{{cfg.facebook}}"
              class="facebook main-icon-button"
              id="facebook"
              ><i class="facebook"></i
            ></a>
            {%endif%} {% if cfg.instagram != '' %}
            <a
              href="{{cfg.instagram}}"
              class="instagram main-icon-button"
              id="instagram"
              ><i class="instagram"></i
            ></a>
            {%endif%} {% if cfg.twitter != '' %}
            <a
              href="{{cfg.twitter}}"
              class="twitter main-icon-button"
              id="twitter"
              ><i class="twitter"></i
            ></a>
            {%endif%} {% if cfg.linkedin != '' %}
            <a
              href="{{cfg.linkedin}}"
              class="linkedin main-icon-button"
              id="linkedin"
              ><i class="linkedin"></i
            ></a>
            {%endif%} {% if cfg.tiktok != '' %}
            <a href="{{cfg.tiktok}}" class="tiktok main-icon-button" id="tiktok"
              ><i class="tiktok"></i
            ></a>
            {%endif%}
          </div>
        </div>
      </div>
      <div class="footer-row">
        <p id="copyright">{{content.global_[lang]['copyrightMsg']}}</p>
      </div>
    </footer>
    <script type="text/javascript">
      const init= ()=> {
        initCategories({{dumps(utils.mutliple_to_dicts(db_helper.categories.active_cats)) | safe}});
        initArticles({{dumps(utils.mutliple_to_dicts(db_helper.articles.get_all_articles())) | safe}})
        changeHeaderLogoOnScroll= true;
        document.firstElementChild.setAttribute('data-theme', '{{mode | lower}}')
      }

      if (window.attachEvent) window.attachEvent('load', init);
      if (window.addEventListener) window.addEventListener('load', init);

    </script>
  </body>
</html>
