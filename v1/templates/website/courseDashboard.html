<!DOCTYPE html>
{% if lang == 'AR' %}
  <html dir="RTL">
    {% else %}
    <html dir="LTR">
{% endif %}
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>
      {{content.global_[lang]['platformTitle']}} -
      {{content.tabs[lang]['courses']}}
    </title>
    <link rel="icon" type="image/x-icon" href="{{url_for('static', filename='website/global/styles/images/symbol-512.ico')}}" />
    <link
      rel="stylesheet"
      type="text/css"
      href="{{url_for('static', filename='website/courseDashboard/styles/computer.css')}}"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="{{url_for('static', filename='website/courseDashboard/styles/tablets.css')}}"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="{{url_for('static', filename='website/courseDashboard/styles/mobile.css')}}"
    />

    <link
      rel="stylesheet"
      type="text/css"
      href="{{url_for('static', filename='website/global/styles/computer.css')}}"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="{{url_for('static', filename='website/global/styles/largeTablets.css')}}"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="{{url_for('static', filename='website/global/styles/smallTablets.css')}}"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="{{url_for('static', filename='website/global/styles/mobile.css')}}"
    />

    <script
      type="text/javascript"
      src="{{url_for('static', filename='website/global/scripts/main.js')}}"
    ></script>
    <script
      type="text/javascript"
      src="{{url_for('static', filename='website/courseDashboard/scripts/main.js')}}"
    ></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/js/solid.min.js" integrity="sha512-+fI924YJzeYFv7M0R29zJvRThPinSUOAmo5rpR9v6G4eWIbva/prHdZGSPN440vuf781/sOd/Fr+5ey0pqdW9w==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/fontawesome.min.css" integrity="sha512-d0olNN35C6VLiulAobxYHZiXJmq+vl+BGIgAxQtD5+kqudro/xNMvv2yIHAciGHpExsIbKX3iLg+0B6d0k4+ZA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/solid.min.css" integrity="sha512-pZlKGs7nEqF4zoG0egeK167l6yovsuL8ap30d07kA5AJUq+WysFlQ02DLXAmN3n0+H3JVz5ni8SJZnrOaYXWBA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
  <body>
    <style type="text/css">
      {% if lang == 'AR' %}
      :root {
        --pff: "Neue Haas Grotesk Display Pro";
        --sff: sans-serif;
      }
      {% else %}
      :root {
        --pff: "Raleway";
        --sff: "Poppins";
      }
      {% endif %}
    </style>
        <header>
          <div id="intro-row">
            <div style="display: flex; flex-direction: row; align-items: center; justify-content: center;">
              <button onclick="toggleDrawer()" class="shadow-icon-button" style="display: flex;" id="drawer"><i class="drawer"></i></button>
              <div
              onclick="window.open('{{consts.index_route}}', `_self`);"
              id="logo"
              ></div>
            </div>
          <div id="options">
            {% if user_data %}
            <button onclick="window.open('/profile/', '_self');" class="shadow-button" id="welcome-back">{{content.global_[lang]['welcomeBack']}}<br><span>{{user_data.name}}<span></span></button>
            {%else%}
            <button onclick="window.open('/login/', '_self');" class="main-button">
              {{content.actions[lang]['login']}}
            </button>
            {%endif%}
            |
            <button onclick="openSearcDFhDialog();" class="main-icon-button">
              <i onclick="openSearchDialog();" class="search"></i>
            </button>
            <button onclick="toggleTheme(`{{mode}}`);" class="main-icon-button">
              <i class="theme"></i>
            </button>
            <div class="lang header-dropdown">
              <button class="main-icon-button" id="lang"><i class="lang"></i></button>
              <div class="lang header-dropdown-content">
                <div id="dropdown-tabs">
                  <button class="lang {%if lang == 'EN' %} active {%endif%} header-tab" onclick="toggleLang(`{{lang}}`)">English</button>
                  <button class="lang {%if lang == 'AR' %} active {%endif%} header-tab" onclick="toggleLang(`{{lang}}`)">العربية</button>
                </div>
              </div>
          </div>
          </div>
          </div>
          <div id="tabs">
            <div id="tabs">
              <button onclick="toggleDrawer()" class="shadow-icon-button" style="display: none;" id="drawer"><i class="drawer"></i></button>
            <div
            onclick="window.open('{{consts.index_route}}', `_self`);"
            id="logo"
            ></div>
            {% for tab in layout.header_tabs %}
              {% if tab['mode'] == 'link' %}
                <a href="{{tab['redirect']}}" class="header-tab">{{content.tabs[lang][tab['text']]}}</a>
              {%endif%}
              {% if tab['mode'] == 'category' %}
                <a href="/categories/{{tab['categoryId']}}" class="header-tab">{{db_helper.categories.get_category_by_id(tab['categoryId']).name[lang]}}</a>
              {%endif%}
              {% if tab['mode'] == 'classification' %}
              {%set classification= db_helper.categories.get_parent_category_by_id(tab['classificationId']) %}
                <div class="header-dropdown">
                  <button onclick="window.open(`/classifications/{{classification.id}}`, '_self')" class="header-dropbtn">{{classification.name[lang]}}</button>
                  <div class="header-dropdown-content">
                    <div id="label">
                      <h3>{{classification.name[lang]}}</h3>
                      <p>{{classification.bio[lang]}}</p>
                      <button onclick="window.open(`/classifications/{{classification.id}}`, '_self')" class="main-button">{{content.actions[lang]['seeMore']}}</button>
                    </div>
                    <div id="dropdown-tabs">
                      {% for category in classification['categories'] %}
                      <a class="header-tab" href="/categories/{{category.id}}">
                        <div class="shadow-icon-button"><i style="background-image: url('/assets/categories/icons/{{category.id}}/');"></i></div>
                        <p>{{category.name[lang]}}</p>
                      </a>
                      {%endfor%}
                    </div>
                  </div>
              </div>
              {%endif%}
            {%endfor%}
            </div>
            <div id="options">
              <button onclick="openSearcDFhDialog();" class="main-icon-button collabsed">
                <i onclick="openSearchDialog();" class="search"></i>
              </button>
              <div class="lang header-dropdown">
                <button class="main-icon-button collabsed" id="lang"><i class="lang"></i></button>
                <div class="lang header-dropdown-content">
                  <div id="dropdown-tabs">
                    <button class="lang {%if lang == 'EN' %} active {%endif%} header-tab" onclick="toggleLang(`{{lang}}`)">English</button>
                    <button class="lang {%if lang == 'AR' %} active {%endif%} header-tab" onclick="toggleLang(`{{lang}}`)">العربية</button>
                  </div>
                </div>
            </div>
            </div>
      
          </div>
        </header>
      <section id="intro">
        <div id="container">
          <div id="content">
            <div id="information">
              <div class="information-snippet" id="snippet-one">
                <div class="icon" id="snippet-one"></div>
                <h3>{{user_data['courses'][course.id]['completed_sessions'] | length }} <span>/ {{course.sessions | length}}<br>{{content.courses[lang]['completeSessions']}}</span></h3>
              </div>
              <div class="information-snippet" id="snippet-two">
                <div class="icon" id="snippet-one"></div>
                <h3>0 <span>/ 0<br>{{content.courses[lang]['testsPassed']}}</span></h3>
              </div>
              <div class="information-snippet" id="snippet-three">
                <div class="icon" id="snippet-one"></div>
                <h3>{{(((user_data['courses'][course.id]['completed_sessions'] | length) / (course.sessions | length)) *100) | int}}<span>%<br>{{content.courses[lang]['courseCompletion']}}</span></h3>
              </div>
            </div>
            <div class="options" id="options">
              <button class="main-button" onclick="openSessionsDialog();">{{content.actions[lang]['continueCourse']}}</button>
            </div>
          </div>
        </div>
      </section>
      <section id="sessions">
        <div id="sessions">
          <h2>المحاضرات</h2>
          {%for session in course.sessions.values() %}
          {%if (user_data.courses[course.id]["sessions_schdule"][session.id] | float) < (current_time| float)%}
          <div class="session-row" id="sess-{{session.id}}"
          {% if session['id'] in user_data['courses'][course.id]['completed_sessions'] %}
            onclick="openSessionsDialog('{{session.id}}')" 
          {%endif%}
          >
            <h3>{{session['title'][lang]}}</h3>
            <p>{{session['bio'][lang]}}</p>
            {% if session['id'] in user_data['courses'][course.id]['completed_sessions'] %}
              <p id="completed" style="color: green; font-weight: 900;">اكتملت</p>
            {%else%}
              <p id="completed" style="color: red; font-weight: 900;">لم تكتمل</p>
            {%endif%}
          </div>
          {%endif%}
          {%endfor%}
          {%for session in course.sessions.values() %}
          {%if (user_data.courses[course.id]["sessions_schdule"][session.id] | float) > (current_time| float)%}
          <div class="session-row next-session-announcment" style="display: none;" id="sess-{{session.id}}"
          >
            <h3>{{content.global_[lang]["next_session"]}}: {{session['title'][lang]}}</h3>
            <p>{{session['bio'][lang]}}</p>
              <p id="completed" style="color: green; font-family: var(--sff); font-weight: 900;">
                {%set display_date= convert_date(user_data.courses[course.id]["sessions_schdule"][session.id] | float)%}
                {{content.months[lang][display_date.strftime('%B %d, %Y').split(' ')[0]]}}{%if lang == "AR"%}{{'،'}}{%else%}{{","}}{%endif%} {{display_date.strftime('%B %d, %Y').split(' ')[1].split(',')[0].split(' ')[0]}} {{display_date.strftime('%B %d, %Y').split(' ')[2].split(',')[0].split(' ')[0]}} - {{display_date.strftime("%H:%M")}}
              </p>
          </div>
          {%endif%}
          {%endfor%}

        </div>
        <div id="promo">
          <div id="promo" style="background-image: url(/courses/cover/{{course.id}}/);"></div>
          <p id="course-name">{{course.title[lang]}}</p>
          <p id="course-bio">{{course.bio[lang]}}</p>
          <div class="divider"></div>
          <p id="course-name">{{content.global_[lang]['courseContent']}}</p>
          <div id="course-content-list">
            {%for content_snippet in course.content_list %}
            <h3 class="course-content-snippet-title">{{content_snippet['title'][lang]}}</h3>
            <ul>
              {%for li in content_snippet['content'][lang]%}
              <li>{{li}}</li>
              {%endfor%}
            </ul>
            <div class="divider"></div>
            {%endfor%}            
          </div>
          <div class="divider"></div>
          <div id="data">
              <p class="price">{{course.price}}$<br><span>{{content.global_[lang]['price']}}</span></p>
              <p class="sessions">{{course.sessions | length}}<br><span>{{content.global_[lang]['sessions']}}</span></p>
              <p class="students">1.1K<br><span>{{content.global_[lang]['students']}}</span></p>
          </div>

        </div>      
      </section>
      <section class="random-quote">
      {% set random_quote= db_helper.quotes.get_quote()%}
      <div class="decoration">"</div>
      <div class="content">
        <h3>{{random_quote['quote'][lang]}}</h3>
        <p>{{random_quote['quoteeName'][lang]}}</p>
      </div>
      <div class="decoration">"</div>
    </section>
    <div class="dialog-overlay" id="dialog-overlay"></div>
    <div class="dialog" id="dialog">
      <div id="header">
        <h3></h3>
        <div onclick="closeSessionsDialog();">x</div>
      </div>
      <div id="body">
        <div id="main-section">
        </div>
        <div id="side-bar"></div>
      </div>
      
    </div>

    <footer>
      </div>
      <div class="footer-row" id="info">
        <div id="information">
          <div id="logo" class="symbol"></div>
          <h3 onclick="window.open('/', '_self');" style="cursor: pointer">{{content.global_[lang]['platformTitle']}}</h3>
          <p>{{content.global_[lang]['footerMsg']}}</p>
        </div>
        <div id="findUs">
          <h3>{{content.global_[lang]['lightToFindUs']}}</h3>
          <div id="social-media-icons">
            {% if cfg.facebook != '' %}
            <a
              href="{{cfg.facebook}}"
              class="facebook main-icon-button"
              id="facebook"
              ><i class="facebook"></i
            ></a>
            {%endif%} {% if cfg.instagram != '' %}
            <a
              href="{{cfg.instagram}}"
              class="instagram main-icon-button"
              id="instagram"
              ><i class="instagram"></i
            ></a>
            {%endif%} {% if cfg.twitter != '' %}
            <a
              href="{{cfg.twitter}}"
              class="twitter main-icon-button"
              id="twitter"
              ><i class="twitter"></i
            ></a>
            {%endif%} {% if cfg.linkedin != '' %}
            <a
              href="{{cfg.linkedin}}"
              class="linkedin main-icon-button"
              id="linkedin"
              ><i class="linkedin"></i
            ></a>
            {%endif%} {% if cfg.tiktok != '' %}
            <a href="{{cfg.tiktok}}" class="tiktok main-icon-button" id="tiktok"
              ><i class="tiktok"></i
            ></a>
            {%endif%}
          </div>
        </div>
      </div>
      <div class="footer-row" id="warning">
        <p id="title">{{content.global_[lang]['riskwarning']}}</p>
        <p id="warning">{{content.global_[lang]['riskwarningMsg']}}</p>
      </div>
      <div class="footer-row">
        <p id="copyright">{{content.global_[lang]['copyrightMsg']}}</p>
      </div>
    </footer>
    <div id="search-dialog-overlay" onclick="closeSearchDialog();"></div>
    <div id="search-dialog" class="dialog">
      <div id="overlay">
        <div class="header">
          <h3>{{content.global_[lang]['search']}}</h3>
          <div id="sheach-dialog-close" onclick="closeSearchDialog();">x</div>
        </div>
        <div id="body">
          <div id="search-options">
            <div id="field-wrapper">
              <input
                class="single-line-field-awhite"
                type="text"
                name="token"
                placeholder="{{content.placeholders[lang]['search']}}"
              />
              <button class="main-button">
                {{content.global_[lang]['search']}}
              </button>
            </div>
            <div id="search-dialog-categories">
              {% for pcat in db_helper.categories.parent_cats %}
              <div class="search-dialog-categories-column">
                <a class="parent-cat" href="{{pcat.main_route}}"
                  >{{pcat.name[lang]}}</a
                >
                <p>{{pcat.bio[lang][:50]}}...</p>
                {% for cat in pcat.categories %}
                <a class="inner-cat" href="/categories/{{cat.id}}/"
                  >{{cat.name[lang]}}</a
                >
                {%endfor%}
              </div>
              {% endfor %}
            </div>
          </div>
          <div id="trending-articles">
            <div class="header">
              <h3>{{content.global_[lang]['trendingNow']}}</h3>
              <button class="main-button">
                {{content.actions[lang]['seeMore']}}
              </button>
            </div>
            <div id="trending-articles-body">
              {% for article in db_helper.articles.all_articles[:9] %}
                          <div class="search-dialog-article-card-border" onclick="window.open('/articles/{{article._id}}/', '_self')">

                <div class="search-dialog-article-card">
                  <div
                    class="cover"
                    style="background-image: url(/assets/articles/covers/{{article.id}});"
                  ></div>
                  <div class="content">
                    <div class="classification">
                      {%set parent_category= db_helper.categories.get_parent_category_by_id(article.parent_category) %}
                      {%set category= db_helper.categories.get_category_by_id(article.category) %}
                      {% if parent_category %}
                      {{parent_category.name[lang]}}
                      {%endif%}
                      {% if parent_category and category %}
                      - 
                      {% endif %}
                      {% if category %}
                      {{category.name[lang]}}
                      {%endif%}
                        </div>
                    <h3>{{article.title[lang]}}</h3>
                    <p>{{article.short_brief[lang]}}</p>
                  </div>
                </div>
              </div>
              {%endfor%}
            </div>
          </div>
        </div>
      </div>
    </div>
    <div id="drawer-overlay"></div>
    <div id="drawer-menu">
      <div id="header">
        <div id="logo">
          <div id="logo"></div>
          <div id="title">{{content.global_[lang]['platformTitle']}}</div>
        </div>
        <div id="close" onclick="toggleDrawer();">x</div>
      </div>
      <div id="tabs">
        <a href="/" class="drawer-tab" id="home">{{content.tabs[lang]["home"]}}</a>
        <a href="/aboutUs/" class="drawer-tab" id="aboutUs">{{content.tabs[lang]["aboutUs"]}}</a>
        <a href="/articles/" class="drawer-tab" id="articles">{{content.tabs[lang]["articles"]}}</a>
        <a href="/careers/" class="drawer-tab" id="careers">{{content.tabs[lang]["careers"]}}</a>
        <a href="/categories/" class="drawer-tab" id="categories">{{content.tabs[lang]["categories"]}}</a>
        <a href="/agenda/" class="drawer-tab" id="agenda">{{content.tabs[lang]["agenda"]}}</a>
        {% for pcat in db_helper.categories.parent_cats %}
          <div onclick="toggleClassificationRow(this);" class="classifications-collapsable" id="{{(pcat.id | string)[:6]}}">
            <div class="header">
              <p>{{pcat.name[lang]}}</p>
              <div class="icon">{{'>'}}</div>
            </div>
            <div class="body">
              {% for cat in pcat.categories %}
                <a href="/categories/{{cat.id}}/" class="drawer-tab" id="{{cat.name['EN'] | lower}}">{{cat.name[lang]}}</a>
              {%endfor%}
            </div>
          </div>
        {%endfor%}
      </div>
      <div id="social-media-icons">
        {% if cfg.facebook != '' %}
        <a
          href="{{cfg.facebook}}"
          class="facebook main-icon-button"
          id="facebook"
          ><i class="facebook"></i
        ></a>
        {%endif%} {% if cfg.instagram != '' %}
        <a
          href="{{cfg.instagram}}"
          class="instagram main-icon-button"
          id="instagram"
          ><i class="instagram"></i
        ></a>
        {%endif%} {% if cfg.twitter != '' %}
        <a
          href="{{cfg.twitter}}"
          class="twitter main-icon-button"
          id="twitter"
          ><i class="twitter"></i
        ></a>
        {%endif%} {% if cfg.linkedin != '' %}
        <a
          href="{{cfg.linkedin}}"
          class="linkedin main-icon-button"
          id="linkedin"
          ><i class="linkedin"></i
        ></a>
        {%endif%} {% if cfg.tiktok != '' %}
        <a href="{{cfg.tiktok}}" class="tiktok main-icon-button" id="tiktok"
          ><i class="tiktok"></i
        ></a>
        {%endif%}
      </div>
      <div id="copyright">
        <p>{{content.global_[lang]['copyrightMsg']}}</p>
      </div>
    </div>

    <script type="text/javascript">
      const init= ()=> {
        let announcmentsRows= document.querySelectorAll('.next-session-announcment');
        announcmentsRows= Array.from(announcmentsRows);
        announcmentsRows= announcmentsRows.shift();
        announcmentsRows.style.display= 'flex';
        initDrawer('{{lang}}');
        initData({{dumps(course.to_dict()) | safe}}, {{dumps(user_data['courses'][course.id]) | safe}}, '{{lang}}', "{{(user_data)['id']}}");
        changeHeaderLogoOnScroll= true;
      }

      if (window.attachEvent) window.attachEvent('load', init);
      else if (window.addEventListener) window.addEventListener('load', init);
    </script>
  </body>
</html>
